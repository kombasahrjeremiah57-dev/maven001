<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Sign in — BaccaLearn</title>
        <link rel="stylesheet" href="log in.css">
    </head>
    <body>
        <main class="login-wrap">
            <section class="login-card" role="region" aria-labelledby="loginTitle">
                <h1 id="loginTitle">BaccaLearn</h1>
                <p class="muted">Sign in to access study resources and quizzes.</p>

                <form id="loginForm" class="form" autocomplete="on">
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" inputmode="email" required placeholder="you@example.com">

                    <label for="password">Password</label>
                    <input id="password" name="password" type="password" required placeholder="Enter your password">

                    <div class="actions">
                        <button type="submit" class="btn primary">Sign in</button>
                        <button type="button" id="fillDemo" class="btn ghost">Use demo</button>
                    </div>

                    <p id="error" class="error" aria-live="polite"></p>
                </form>

                <div class="demo">
                    <strong>Demo account</strong>
                    <div>Email: <code>demo@baccalearn.test</code></div>
                    <div>Password: <code>DemoPass123</code></div>
                </div>

                <footer class="small muted">Prototype — do not use for production authentication</footer>
            </section>
        </main>

        <script>
            // If already authenticated, go to index
            try {
                if (localStorage.getItem('loggedIn') === 'true') {
                    location.replace('index.html');
                }
            } catch (e) { /* ignore */ }

            (function(){
                const DEMO = { email: 'demo@baccalearn.test', password: 'DemoPass123' };
                const form = document.getElementById('loginForm');
                const err = document.getElementById('error');
                const fill = document.getElementById('fillDemo');

                function setAuth(email) {
                    try {
                        localStorage.setItem('loggedIn','true');
                        localStorage.setItem('username', email);
                    } catch(e) { console.warn(e); }
                }

                form.addEventListener('submit', function(ev){
                    ev.preventDefault(); err.textContent='';
                    const email = form.email.value.trim();
                    const password = form.password.value;
                    if (email === DEMO.email && password === DEMO.password) {
                        setAuth(email);
                        location.replace('index.html');
                        return;
                    }
                    err.textContent = 'Invalid credentials — try the demo details shown below.';
                });

                fill.addEventListener('click', function(){
                    form.email.value = DEMO.email; form.password.value = DEMO.password; err.textContent='';
                });
            })();
        </script>
    </body>
</html>